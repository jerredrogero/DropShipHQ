{% extends 'core/base.html' %}
{% load widget_tweaks %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Settings</h2>

    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Accounts</h3>
                </div>
                <div class="card-body">
                    <ul class="list-group mb-3">
                        {% for account in accounts %}
                            <li class="list-group-item">{{ account.name }}</li>
                        {% empty %}
                            <li class="list-group-item text-muted">No accounts added yet.</li>
                        {% endfor %}
                    </ul>
                    <form method="post" class="mt-3">
                        {% csrf_token %}
                        <div class="form-group">
                            {{ account_form.name|add_class:"form-control" }}
                        </div>
                        <button type="submit" name="add_account" class="btn btn-primary">Add Account</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Merchants</h3>
                </div>
                <div class="card-body">
                    <ul class="list-group mb-3">
                        {% for merchant in merchants %}
                            <li class="list-group-item">{{ merchant.name }}</li>
                        {% empty %}
                            <li class="list-group-item text-muted">No merchants added yet.</li>
                        {% endfor %}
                    </ul>
                    <form method="post" class="mt-3">
                        {% csrf_token %}
                        <div class="form-group">
                            {{ merchant_form.name|add_class:"form-control" }}
                        </div>
                        <button type="submit" name="add_merchant" class="btn btn-primary">Add Merchant</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Cards</h3>
                </div>
                <div class="card-body">
                    <ul class="list-group mb-3">
                        {% for card in cards %}
                            <li class="list-group-item">{{ card.name }}</li>
                        {% empty %}
                            <li class="list-group-item text-muted">No cards added yet.</li>
                        {% endfor %}
                    </ul>
                    <form method="post" class="mt-3">
                        {% csrf_token %}
                        <div class="form-group">
                            {{ card_form.name|add_class:"form-control" }}
                        </div>
                        <button type="submit" name="add_card" class="btn btn-primary">Add Card</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Buying Groups</h3>
                </div>
                <div class="card-body">
                    <ul class="list-group mb-3">
                        {% for buying_group in buying_groups %}
                            <li class="list-group-item">{{ buying_group.name }}</li>
                        {% empty %}
                            <li class="list-group-item text-muted">No buying groups added yet.</li>
                        {% endfor %}
                    </ul>
                    <form method="post" class="mt-3">
                        {% csrf_token %}
                        <div class="form-group">
                            {{ buying_group_form.name|add_class:"form-control" }}
                        </div>
                        <button type="submit" name="add_buying_group" class="btn btn-primary">Add Buying Group</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">API Credentials</h3>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="{{ api_credentials_form.api_key.id_for_label }}">API Key</label>
                            {{ api_credentials_form.api_key|add_class:"form-control" }}
                        </div>
                        <div class="form-group">
                            <label for="{{ api_credentials_form.api_secret.id_for_label }}">API Secret</label>
                            {{ api_credentials_form.api_secret|add_class:"form-control" }}
                        </div>
                        <button type="submit" name="update_api_credentials" class="btn btn-primary">Update API Credentials</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}